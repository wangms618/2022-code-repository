# 垃圾回收器

- 代际假说
  1. 很多对象在内存中存在的时间很短
  2. 不死的对象会活得更久

  v8把**堆**分成 **新生代** 和 **老生代** 两个区
  新生代：存放生存时间短的对象
  老生代：存放生存时间长的对象
  为什么：v8判定对象生存时间长短来将其放置到不同的区
  - 副垃圾回收器（回收新生代区）
  - 主垃圾回收器（回收老生代区）
    执行流程：
    1. 标记存储空间的活动对象（还在使用的对象）和非活动的对象（可以被回收）

  ## 垃圾回收器工作流程
    1. 标记存储空间的活动对象（还在使用的对象）和非活动的对象（可以被回收）
    2. 清理内存中可以被回收的对象的内存空间
    3. 内存整理（频繁回收对象造成内存碎片过多，影响后续的大文件的存储）

    - 副垃圾回收器(scavenge算法，始终保证留下存活的对象)
      1. 把新生代区分成两部分，一半是对象区，一半是空闲区 
      2. 新写入的对象会存到对象区，对象区装满后进行回收，在清理过程中把存活的对象复制到空闲区，且有序整理好。
      3. 对象区和空闲区进行角色转换
      **对象晋升策略** （新生代区会被存活对象装满，把**经过两次回收还存活**的对象会移到老生代区）

    - 主垃圾回收器(Mark-Sweep)
      1. 递归对象找到无法到达的元素（被称为垃圾数据）
      2. 垃圾数据的清除
      3. 整理内存

- **分代收集**